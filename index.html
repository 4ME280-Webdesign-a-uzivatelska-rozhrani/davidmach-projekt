<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PF2026.exe — FIS VŠE</title>
<style>
  body {
    background-color: #000;
    color: #00b050;
    font-family: "Courier New", monospace;
    margin: 0;
    padding: 20px;
    transition: background-color 0.2s;
  }

  #terminal {
    white-space: pre-wrap;
    line-height: 1.3em;
    position: relative;
  }

  #cursor {
    display: inline-block;
    width: 8px;
    height: 1em;
    background-color: #00b050;
    animation: blink 1s steps(1) infinite;
    vertical-align: bottom;
  }

  @keyframes blink { 50% { opacity: 0; } }

  #finalImage {
    display: none;
    margin-top: 20px;
    max-width: 100%;
    border: 2px solid #00b050;
    border-radius: 5px;
  }

  #pressKey {
    margin-top: 20px;
    color: white;
    font-size: 0.9em;
  }

  .flash { background-color: #00ff66 !important; }

  .executed {
    color: white;
    margin-top: 20px;
    font-weight: bold;
  }
</style>
</head>
<body>
<div id="terminal"></div>
<div id="pressKey">Press any key to continue...</div>
<img id="finalImage" src="placeholder.png" alt="PF FIS 2026">

<script>
const terminal = document.getElementById("terminal");
const finalImage = document.getElementById("finalImage");
const pressKey = document.getElementById("pressKey");

// ---------- Lines ----------
const lines = [
  "C:\\FIS> run PF2026.exe",
  "Initializing PF2026.exe ...",
  "Connecting to FIS mainframe ...",
  "Compiling joy.dll module ... done",
  "Loading new year data ............ OK",
  "Creating festive atmosphere ...",
  "PF 2026 — Fakulta informatiky a statistiky"
];

// ---------- Cursor ----------
const cursor = document.createElement("span");
cursor.id = "cursor";
terminal.appendChild(cursor);

// ---------- Typing effect ----------
function typeLine(line, delay = 40) {
  return new Promise(resolve => {
    let i = 0;
    function next() {
      if (i < line.length) {
        cursor.insertAdjacentText("beforebegin", line[i]);
        i++;
        setTimeout(next, delay);
      } else {
        cursor.insertAdjacentText("beforebegin", "\n");
        resolve();
      }
    }
    next();
  });
}

// ---------- Terminal animation ----------
async function runTerminal() {
  pressKey.style.display = "none";
  for (const line of lines) {
    await typeLine(line);
    await new Promise(r => setTimeout(r, 300));
  }
  await showLoadingBar();
}

// ---------- Loading bar ----------
async function showLoadingBar() {
  const barLine = document.createElement("div");
  terminal.appendChild(barLine);

  let progress = 0;
  const total = 30;

  const interval = setInterval(() => {
    if (progress < total) {
      barLine.textContent = `Loading final image: [${"=".repeat(progress)}${" ".repeat(total - progress)}] ${Math.floor((progress / total)*100)}%`;
      progress++;
    } else {
      clearInterval(interval);
      barLine.textContent = `Loading final image: [${"=".repeat(total)}] 100%\n`;
      flashScreen();
    }
  }, 100);
}

// ---------- Flash + show image ----------
function flashScreen() {
  document.body.classList.add("flash");
  setTimeout(() => {
    document.body.classList.remove("flash");
    finalImage.style.display = "block";
    const executed = document.createElement("div");
    executed.className = "executed";
    executed.textContent = "PF2026.exe was successfully executed.";
    terminal.appendChild(executed);
  }, 150);
}

// ---------- Start after key press ----------
async function startTerminal() {
  document.body.removeEventListener("click", startTerminal);
  document.body.removeEventListener("keydown", startTerminal);
  runTerminal();
}

document.body.addEventListener("click", startTerminal);
document.body.addEventListener("keydown", startTerminal);
</script>
</body>
</html>
